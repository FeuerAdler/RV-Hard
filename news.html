<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aktuelle Nachrichten - RV Hard</title>
    <link rel="stylesheet" href="/assets/style.css" />
    <link rel="stylesheet" href="/assets/news/news.css" />
</head>
<body>
    <header>
        <nav id="navigation-container"></nav>
    </header>

    <main class="news-page">
        <section class="container">
            <h1 class="section-title">Aktuelle Nachrichten</h1>
            <div id="news-container" class="news-container"></div>
        </section>
    </main>

    <footer>
        <div class="social-icons">
            <a href="https://www.instagram.com/rv_hard/" target="_blank"><i class="fa-brands fa-instagram"></i></a>
            <a href="https://www.facebook.com/radvereinhard/" target="_blank"><i class="fa-brands fa-facebook"></i></a>
        </div>
        <p>&copy; 2024 RV Hard</p>
        <p><a href="impressum.html">Impressum</a> | <a href="datenschutz.html">Datenschutz</a></p>
    </footer>
    <script src="/assets/navigation-loader.js"></script>
    <script src="/assets/nav.js" defer></script>
    <script src="/assets/script-news.js" defer></script>
    <script>
    document.addEventListener('DOMContentLoaded', async () => {
        await loadNavigation();
        await loadNews();
    });

    async function loadNavigation() {
        try {
            const response = await fetch('/assets/navigationneu.html');
            if (!response.ok) throw new Error(`Status: ${response.status}`);
            document.getElementById('navigation-container').innerHTML = await response.text();
            initNavigationMenu();
        } catch (error) {
            console.error('Fehler beim Laden der Navigation:', error);
        }
    }

    async function loadNews() {
        const newsContainer = document.getElementById('news-container');
        try {
            const response = await fetch('/data/News/news.json');
            const news = await response.json();

            // ðŸ”½ Nur die 6 neuesten laden (davon ausgegangen, dass die Liste absteigend sortiert ist)
            const latestNews = news.slice(0, 6);

            latestNews.forEach(article => {
                const articleEl = document.createElement('article');
                articleEl.className = 'news-item';

                articleEl.innerHTML = `
                    ${article.image ? `<img src="${article.image}" alt="${article.title}" class="news-image">` : ''}
                    <div class="news-content">
                        <h3>${article.title}</h3>
                        <div class="news-meta">
                            <i class="fa-regular fa-calendar-days"></i>
                            <span class="news-date">${formatDate(article.date)}</span>
                        </div>
                        <p>${article.content}</p>
                        <a class="weiterlesen-button" href="${article.link || `news/${article.slug}.html`}">Weiterlesen</a>
                    </div>
                `;
                newsContainer.appendChild(articleEl);
            });

            // ðŸ”½ Button zum Archiv hinzufÃ¼gen
            const archivButton = document.createElement('div');
            archivButton.innerHTML = `
                <div style="text-align:center; margin-top: 30px;">
                    <a href="/news-archiv.html" class="weiterlesen-button">Zum News-Archiv</a>
                </div>
            `;
            newsContainer.appendChild(archivButton);

        } catch (error) {
            console.error('Fehler beim Laden der Nachrichten:', error);
            newsContainer.textContent = 'Fehler beim Laden der Nachrichten.';
        }
    }

    function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString('de-DE');
    }
</script>
<script src="/assets/header-scroll.js" defer></script>
<script src="/assets/cookie-banner.js" defer></script>

</body>
</html>
